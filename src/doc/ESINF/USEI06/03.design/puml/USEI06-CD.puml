@startuml ClassDiagram

title USEI06 - Class Diagram

hide method
skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
skinparam classAttributeIconSize 0

class StationQueryUI {
  ' Handles user interaction for queries
}

class StationQueryController {
  ' Coordinates data loading and queries
}

class StationIndexManager {
  ' This attribute is now a collection,
  ' matching the "1..*" relationship.
  - indexes: Map<String, Tree>
}

class StationRepository {
  ' Responsible for loading from CSV
  - allStations: List<EuropeanStation>
}

class EuropeanStation {
  - stationName: String
  - latitude: double
  - longitude: double
  - country: String
  - timeZoneGroup: String
  - isCity: boolean
  - isMainStation: boolean
}

' The interface for the data structures
interface Tree<T> {
}

' The implementations as required by the US
class BST<T> {
}

class AVLTree<T> {
}

' Relationships
StationQueryUI ..> StationQueryController : uses

StationQueryController --> StationIndexManager : uses 1
StationQueryController --> StationRepository : uses 1

' Repository loads/creates the station objects
StationRepository --> EuropeanStation : creates "0..*"

StationIndexManager ..> EuropeanStation : references

' CORRECTED: Relationship is now composition (solid diamond)
' and matches the class attribute.
StationIndexManager "1" *-- "1..*" Tree : composes

Tree <|.. BST : implements
Tree <|.. AVLTree : implements

' The trees store the station data
Tree o-- "0..*" EuropeanStation : stores

@enduml